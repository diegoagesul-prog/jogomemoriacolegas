<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Jogo da Memória 4x3</title>

<style>
  body{
    font-family: Arial, sans-serif;
    margin:0;
    padding:20px;
    text-align:center;
    background: linear-gradient(90deg,#ffd6a5,#fdffb6);
  }

  h1{
    color:#ff6b6b;
    margin-bottom:10px;
  }

  #controls{
    margin-bottom:15px;
  }

  button{
    padding:10px 16px;
    border:none;
    border-radius:8px;
    font-size:15px;
    cursor:pointer;
    box-shadow:0 2px 4px rgba(0,0,0,.2);
  }

  #status{
    margin:10px 0;
    font-weight:bold;
  }

  /* ===== GRID AJUSTADO ===== */
  #game{
    display:grid;
    grid-template-columns: repeat(4, 1fr); /* 4 colunas fixas */
    gap:14px; /* espaço entre cartas */
    max-width:520px;
    margin:0 auto;
  }

  .card{
    width:100%;
    aspect-ratio:1/1; /* quadrada */
    perspective:1000px;
    cursor:pointer;
  }

  .card-inner{
    position:relative;
    width:100%;
    height:100%;
    transition: transform .5s;
    transform-style:preserve-3d;
  }

  .card.flipped .card-inner{
    transform:rotateY(180deg);
  }

  .card-front, .card-back{
    position:absolute;
    width:100%;
    height:100%;
    border-radius:12px;
    backface-visibility:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
  }

  .card-front{
    background:#ccc;
    font-size:28px;
    color:rgba(0,0,0,.3);
  }

  .card-back{
    background:#fff;
    transform:rotateY(180deg);
  }

  .card-back img{
    width:90%;
    height:90%;
    object-fit:cover;
    border-radius:8px;
  }

  .card.matched .card-back{
    background:#8f8;
    box-shadow:0 0 10px #4caf50;
  }

  /* ===== AJUSTE EXTRA PARA CELULAR ===== */
  @media (max-width:420px){
    #game{
      gap:12px;
      max-width:360px;
    }
  }

</style>
</head>
<body>

<h1>Jogo da Memória 4x3</h1>

<div id="controls">
  <button onclick="startGame()">Começar</button>
  <button onclick="restartGame()">Reiniciar</button>
</div>

<div id="status">Pares encontrados: 0 / 6</div>

<div id="game"></div>

<script>

/* ===== CONFIGURAÇÃO ===== */

const normalPairs = [
  'images/foto1.jpg',
  'images/foto2.jpg',
  'images/foto3.jpg',
  'images/foto4.jpg',
  'images/foto5.jpg'
];

const specialPairA = 'images/foto6.jpg';
const specialPairB = 'images/foto7.jpg';

/* Sons */
const soundMatch = new Audio('sounds/acerto.mp3');
const soundFail = new Audio('sounds/erro.mp3');
const soundWin = new Audio('sounds/parabens.mp3');
const soundSpecial = new Audio('sounds/special.mp3');

let deck = [];
let flipped = [];
let matchedCount = 0;
let pairsFound = 0;
let lockBoard = false;
let gameActive = false;

function startGame(){

  deck = [];

  normalPairs.forEach(img=>{
    deck.push(img);
    deck.push(img);
  });

  deck.push(specialPairA);
  deck.push(specialPairB);

  shuffle(deck);

  flipped = [];
  matchedCount = 0;
  pairsFound = 0;
  lockBoard = false;
  gameActive = true;

  renderBoard();
  updateStatus();
}

function restartGame(){
  startGame();
}

function renderBoard(){
  const gameDiv = document.getElementById('game');
  gameDiv.innerHTML = '';

  deck.forEach(src=>{
    const card = document.createElement('div');
    card.className = 'card';
    card.dataset.image = src;

    const inner = document.createElement('div');
    inner.className = 'card-inner';

    const front = document.createElement('div');
    front.className = 'card-front';
    front.textContent = '★';

    const back = document.createElement('div');
    back.className = 'card-back';

    const img = document.createElement('img');
    img.src = src;

    back.appendChild(img);
    inner.appendChild(front);
    inner.appendChild(back);
    card.appendChild(inner);

    card.addEventListener('click', ()=> flipCard(card));
    gameDiv.appendChild(card);
  });
}

function flipCard(card){

  if(!gameActive) return;
  if(lockBoard) return;
  if(card.classList.contains('flipped') || card.classList.contains('matched')) return;

  card.classList.add('flipped');
  flipped.push(card);

  if(flipped.length === 2){
    lockBoard = true;
    setTimeout(checkMatch, 600);
  }
}

function isSpecialMatch(a,b){
  return (a===specialPairA && b===specialPairB) ||
         (a===specialPairB && b===specialPairA);
}

function checkMatch(){

  const [c1,c2] = flipped;
  const img1 = c1.dataset.image;
  const img2 = c2.dataset.image;

  const normalMatch = img1 === img2;
  const specialMatch = isSpecialMatch(img1,img2);

  if(normalMatch || specialMatch){

    c1.classList.add('matched');
    c2.classList.add('matched');

    matchedCount += 2;
    pairsFound++;

    if(specialMatch){
      soundSpecial.play().catch(()=>{});
    } else {
      soundMatch.play().catch(()=>{});
    }

    if(matchedCount === deck.length){
      finishGame();
    }

  } else {
    c1.classList.remove('flipped');
    c2.classList.remove('flipped');
    soundFail.play().catch(()=>{});
  }

  flipped = [];
  lockBoard = false;
  updateStatus();
}

function finishGame(){
  gameActive = false;
  soundWin.play().catch(()=>{});
  setTimeout(()=>{
    alert("Parabéns! Você completou o jogo!");
  },200);
}

function updateStatus(){
  document.getElementById('status').textContent =
    `Pares encontrados: ${pairsFound} / ${deck.length/2}`;
}

function shuffle(array){
  for(let i=array.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [array[i],array[j]]=[array[j],array[i]];
  }
}

</script>

</body>
</html>
